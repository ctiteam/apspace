<!-- <fireworks></fireworks>

<ion-header>
  <ion-navbar color='primary'>
    <ion-title>Dashboard</ion-title>
  </ion-navbar>
</ion-header>

<ion-content>
  <ion-refresher pullMax="400" pullMin="60" (ionRefresh)="doRefresh($event)">
    <ion-refresher-content pullingIcon="refresh">
    </ion-refresher-content>
  </ion-refresher>

  <div id='cover'></div>
  <ion-card padding>
    <ion-row>
      <ion-col col-6>
        <ion-icon class='big-icons' name='md-calendar'></ion-icon>
        <p class='icon-title'>Classes Today</p>
        <p class='top-value' [style.color]="'#0dbd53'">
          {{ totalClasses !== undefined ? totalClasses : 'â€¦' }}
        </p>
      </ion-col>
      <ion-col col-6>
        <ion-icon class='big-icons' name='md-alarm'></ion-icon>
        <p class='icon-title'>Overall Attendance</p>
        <p *ngIf='attendancePercent$ | async as ap' class='top-value' [style.color]=".8 <= ap && ap <= 1 ? '#0dbd53' : '#f04141'">
          {{ ap | percent }}
        </p>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col col-6>
        <ion-icon class='big-icons' name='md-card'></ion-icon>
        <p class='icon-title'>APCard Balance</p>
        <p class='top-value' *ngIf='transaction$ | async as balance' [style.color]="balance == 0 ? '#f04141' : '#0dbd53'">{{
          balance | currency:'MYR':'RM' }}</p>
      </ion-col>
      <ion-col col-6>
        <ion-icon class='big-icons' name='md-cash'></ion-icon>
        <p class='icon-title'>Total Overdue</p>
        <p *ngIf="overdue$ | async as overdue" class='top-value' [style.color]="overdue[0]?.TOTAL_OVERDUE == 0 ? '#0dbd53' : '#f04141'">
          {{ overdue[0]?.TOTAL_OVERDUE | currency:'MYR':'RM':'1.0-0' }}
        </p>
      </ion-col>
    </ion-row>
  </ion-card>

  <ng-template [ngIf]='!local' [ngIfElse]='localStudent'>
    <ng-template let-visa [ngIf]='visa$ | async' [ngIfElse]='locadingVisaStatus'>
      <ng-template [ngIf]='visa[0].VISA_EXPIRY_DATE' [ngIfElse]='noVisa'>
        <ion-card>
          <ion-card-header>
            <ion-icon padding-right name='md-globe' [style.color]="'#F78F08'"></ion-icon>
            Visa Expiry Date
          </ion-card-header>
          <ion-card-content>
            {{ visa[0].VISA_EXPIRY_DATE | date: 'mediumDate' }}
          </ion-card-content>
        </ion-card>
      </ng-template>
      <ng-template #noVisa>
      </ng-template>
    </ng-template>
    <ng-template #locadingVisaStatus>
      <ion-card>
        <ion-item no-lines>
          <skeleton-item height="100px" width="100%"></skeleton-item>
        </ion-item>
      </ion-card>
    </ng-template>
  </ng-template>
  <ng-template #localStudent>
  </ng-template>

  <ng-template let-attendances [ngIf]='attendance$ | async' [ngIfElse]='loadingLowAttendances'>
    <ng-template [ngIf]='attendances.length > 0' [ngIfElse]='nosubject'>
      <ion-card>
        <ion-card-header>
          <ion-icon padding-right name='alarm' [style.color]="'#2042A6'"></ion-icon>
          Low Attendance Subjects
        </ion-card-header>
        <ion-card-content>
          <ion-segment [(ngModel)]="subject">
            <ion-segment-button *ngFor='let a of attendances' [value]='a.SUBJECT_CODE' (click)='getPieChart(a.TOTAL_CLASSES, a.TOTAL_ABSENT, a.SUBJECT_CODE, a.PERCENTAGE)'>
              {{ a.SUBJECT_CODE.split('-')[a.SUBJECT_CODE.split('-').length -1] }}
            </ion-segment-button>
          </ion-segment>
          <ion-label *ngIf='subjectCode'>{{ subjectCode + ': ' + percent + '%' }}</ion-label>
          <chart [type]="type[0]" [data]="pieChartData" [options]="options[0]"></chart>
        </ion-card-content>
      </ion-card>
    </ng-template>
    <ng-template #nosubject>
    </ng-template>
  </ng-template>
  <ng-template #loadingLowAttendances>
    <ion-card>
      <ion-item no-lines>
        <skeleton-item height="200px" width="100%"></skeleton-item>
      </ion-item>
    </ion-card>
  </ng-template>

  <ng-template let-holiday [ngIf]='nextHoliday$ | async' [ngIfElse]='loadingHoliday'>
    <ion-card tappable (click)="openPage('HolidaysPage')">
      <ion-card-header>
        <ion-icon padding-right name='globe' [style.color]="'#5AC8FA'"></ion-icon>
        Upcoming Holiday
      </ion-card-header>
      <ng-template [ngIf]='holiday.holiday_name' [ngIfElse]='noHoliday'>
        <ion-card-content *ngIf="holiday.holiday_name; else noHoliday">
          <h2 padding-bottom>{{ holiday.holiday_name }}</h2>
          <ion-label no-margin>
            <ion-icon padding-right name='calendar'></ion-icon>
            {{ holiday.holiday_start_date | date:'mediumDate' }}
            <ng-template [ngIf]='holiday.holiday_start_date !== holiday.holiday_end_date'>
              - {{ holiday.holiday_end_date | date:'mediumDate'}}
            </ng-template>
          </ion-label>
          <ng-template [ngIf]='holiday.holiday_description'>
            <p no-margin>
              <ion-icon padding-right name='text'></ion-icon>
              {{ holiday.holiday_description }}
            </p>
          </ng-template>
        </ion-card-content>
      </ng-template>
      <ng-template #noHoliday>
        <ion-card-content>
          <ion-note>No upcoming holidays</ion-note>
        </ion-card-content>
      </ng-template>
    </ion-card>
  </ng-template>
  <ng-template #loadingHoliday>
    <ion-card>
      <ion-item no-lines>
        <skeleton-item height="1.5em" width="100%"></skeleton-item>
      </ion-item>
    </ion-card>
  </ng-template>

  <ng-template let-exams [ngIf]='exam$ | async | nextExams' [ngIfElse]='loadingExams'>
    <ng-template [ngIf]='exams && exams.length > 0' [ngIfElse]='noExam'>
      <ion-card tappable class="list-block" (click)="openPage('ExamSchedulePage')">
        <ion-card-header>
          <ion-icon padding-right name='globe' [style.color]="'#5AC8FA'"></ion-icon>
          Upcoming Exams
        </ion-card-header>
        <ion-card-content>
          <ion-list no-lines>
            <div *ngFor="let exam of exams" class="side-line" [style.borderColor]="'#fd5000'">
              <h2>{{ exam.module }}</h2>
              <ion-label no-margin>
                <ion-icon padding-right name='clock'></ion-icon>
                {{ exam.since | date:'mediumDate'}} ({{ exam.since | date:'shortTime'}} - {{ exam.until |
                date:'shortTime'}})
              </ion-label>
              <p padding-right>Dockets will be released on <b>{{ exam.docketsDue | date }}</b>, and the
                results will be published on <b>{{ exam.resultDate | date }}.</b></p>
            </div>
          </ion-list>
        </ion-card-content>
      </ion-card>
    </ng-template>
    <ng-template #noExam>
      <ion-card>
        <ion-card-header>
          <ion-icon padding-right name='book' [style.color]="'#2042A6'"></ion-icon>
          Upcoming Exams
        </ion-card-header>
        <ion-card-content>
          <ion-note>No upcoming exams</ion-note>
        </ion-card-content>
      </ion-card>
    </ng-template>
  </ng-template>
  <ng-template #loadingExams>
    <ion-card>
      <ion-item no-lines *ngFor="let i of numOfSkeletons">
        <skeleton-item height="100px" width="100%"></skeleton-item>
      </ion-item>
    </ion-card>
  </ng-template>

  <ng-template [ngIf]='!block' [ngIfElse]='blocked'>
    <ng-template [ngIf]='barChartData' [ngIfElse]='loadingGPA'>
      <ion-card>
        <ion-card-header>
          <ion-icon padding-right name='checkmark-circle' [style.color]="'#F78F08'"></ion-icon>
          GPA per Intake
        </ion-card-header>
        <chart [type]="type[1]" [data]="barChartData" [options]="options[1]"></chart>
      </ion-card>
    </ng-template>
    <ng-template #loadingGPA>
      <ion-card>
        <ion-item no-lines>
          <skeleton-item height="160px" width="100%"></skeleton-item>
        </ion-item>
      </ion-card>
    </ng-template>
  </ng-template>
  <ng-template #blocked>
  </ng-template>
</ion-content> -->

<ion-content>
  <ion-refresher pullMax="400" pullMin="60" (ionRefresh)="doRefresh($event)">
    <ion-refresher-content pullingIcon="refresh"> </ion-refresher-content>
  </ion-refresher>

  <!-- START ALL THE PAGE CONTENT -->
  <div class="main" id="main">
    <!-- START PAGE BODY -->
    <div class="main-content">
      <!-- START SECTIONS (1 to 10)'s CONTAINER -->
      <div class="container">
        <!-- START HEADER (GREETING MESSAGE SECTION) -->
        <div class="profile-section profile row pr-3">
          <div class="col-9 info">
            <ng-template let-profile [ngIf]="profile$ | async">
              <p class="h3 username">
                {{ greetingMessage }},
                {{ capitalizeString(profile?.NAME.split(" ")[0]) }}!
              </p>
              <p class="h4 greeting-message">Nice to see you again.</p>
            </ng-template>
            <!-- <ng-template let-staffProfile [ngIf]="staffProfile$ | async">
              <h4 class="h3 pl-2 username">{{ staffProfile[0]?.FULLNAME }}</h4>
            </ng-template> -->
          </div>
          <div class="col-3 notification">
            <div
              class="notification-wrapper float-right text-center"
              (click)="openNotification()"
            >
              <ion-icon name="notifications"></ion-icon>
              <ion-badge item-right *ngIf="notificationNumber" color="danger">{{
                notificationNumber
              }}</ion-badge>
            </div>
          </div>
        </div>
        <!-- END HEADER (GREETING MESSAGE SECTION) -->

        <!-- START SECTION 1: QUICK ACCESS MENU -->
        <div class="quick-access">
          <div class="container special-conainer">
            <div class="row">
              <!-- START QUICK ACCESS MENU ITEM 1 -->
              <div class="col-4 scroll-item">
                <div class="quick-access-item">
                  <ion-icon name="alarm"></ion-icon>
                  <div class="quick-access-item-title">
                    Overall <span class="second-line">Attendance</span>
                  </div>
                  <div
                    class="quick-access-item-subtitle"
                    *ngIf="(attendancePercent$ | async) as ap"
                  >
                    {{ ap | percent }}
                  </div>
                </div>
              </div>
              <!-- END QUICK ACCESS MENU ITEM 1 -->

              <!-- START QUICK ACCESS MENU ITEM 2 -->
              <div class="col-4 scroll-item">
                <div class="quick-access-item">
                  <ion-icon name="card"></ion-icon>
                  <div class="quick-access-item-title">
                    APCard <span class="second-line">Balance</span>
                  </div>
                  <div
                    class="quick-access-item-subtitle"
                    *ngIf="(transaction$ | async) as balance"
                  >
                    {{ balance | currency: "MYR":"RM" }}
                  </div>
                </div>
              </div>
              <!-- END QUICK ACCESS MENU ITEM 2 -->

              <!-- START QUICK ACCESS MENU ITEM 3 -->
              <div class="col-4 scroll-item">
                <div class="quick-access-item">
                  <ion-icon name="logo-usd"></ion-icon>
                  <div class="quick-access-item-title">
                    Total <span class="second-line">Outstanding</span>
                  </div>
                  <div
                    class="quick-access-item-subtitle"
                    *ngIf="(overdue$ | async) as overdue"
                  >
                    {{
                      overdue[0]?.TOTAL_OVERDUE | currency: "MYR":"RM":"1.0-0"
                    }}
                  </div>
                </div>
              </div>
              <!-- END QUICK ACCESS MENU ITEM 3 -->
            </div>
          </div>
        </div>
        <!-- END SECTION 1: QUICK ACCESS MENU -->
        <!-- ********************************************* -->
        <!-- START SECTION 2: TODAY'S CLASSES -->
        <!-- <div class="main-section section todays-classes-section"> -->
        <!-- START SECTION 2 HEADER -->
        <!-- <div class="section-header">
            <div class="section-header-icon">
              <ion-icon item-left name="calendar"></ion-icon>
            </div>
            <div class="section-header-text"><h3>Upcoming Classes</h3></div>
          </div> -->
        <!-- END SECTION 2 HEADER -->

        <!-- START SECTION 2 BODY -->
        <!-- <div class="section-body">
            <ng-template
              let-classes
              [ngIf]="upcomingClass$ | async"
              [ngIfElse]="loadingClasses"
            >
              <ng-template
                [ngIf]="classes && classes.length > 0"
                [ngIfElse]="noclass"
              >
                <div *ngFor="let c of classes">
                  <div class="section-body-header">
                    <h4 class="col-12">{{ c.TIME_FROM }} - {{ c.TIME_TO }}</h4>
                  </div>

                  <div class="section-body-content row">
                    <div class="container">
                      <div class="content-item-with-icon col-12 row">
                        <div class="col-2 text-right">
                          <ion-icon item-left name="book"></ion-icon>
                        </div>
                        <div class="col-10 item-info-text">
                          <p ion-text>{{ c.MODID }}</p>
                        </div>
                      </div>

                      <div class="content-item-with-icon col-12 row">
                        <div class="col-2 text-right">
                          <ion-icon item-left name="locate"></ion-icon>
                        </div>
                        <div class="col-10 item-info-text">
                          <p ion-text>{{ c.SUBJECT_DESCRIPTION }}</p>
                        </div>
                      </div>

                      <div class="content-item-with-icon col-12 row">
                        <div class="col-2 text-right">
                          <ion-icon item-left name="locate"></ion-icon>
                        </div>
                        <div class="col-10 item-info-text">
                          <p ion-text>{{ c.LOCATION }} | {{ c.ROOM }}</p>
                        </div>
                      </div>

                      <div class="content-item-with-icon col-12 row">
                        <div class="col-2 text-right">
                          <ion-icon item-left name="person"></ion-icon>
                        </div>
                        <div class="col-10 item-info-text">
                          <p ion-text>{{ c.LECTURER_NAME }}</p>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </ng-template>
              <ng-template #noclass>
                There is no classes for today
              </ng-template>
            </ng-template>
            <ng-template #loadingClasses>
              <ion-card>
                <ion-item no-lines *ngFor="let i of numOfSkeletons">
                  <skeleton-item height="137px" width="100%"></skeleton-item>
                </ion-item>
              </ion-card>
            </ng-template>
          </div> -->
        <!-- END SECTION 2 BODY -->
        <!-- </div> -->
        <!-- END SECTION 2: TODAYS' CLASSES -->
        <!-- ********************************************* -->
        <!-- START SECTION 3: UPCOMING HOLIDAY -->
        <div class="main-section section upcoming-holiday-section">
          <!-- START SECTION 3 HEADER -->
          <div class="section-header">
            <div class="section-header-icon">
              <ion-icon item-left name="bicycle"></ion-icon>
            </div>
            <div class="section-header-text"><h3>Upcoming Holiday</h3></div>
          </div>
          <!-- END SECTION 3 HEADER -->

          <!-- START SECTION 3 BODY -->
          <div class="section-body">
            <ng-template
              let-holiday
              [ngIf]="nextHoliday$ | async"
              [ngIfElse]="loadingHoliday"
            >
              <ng-template [ngIf]="holiday.holiday_name" [ngIfElse]="noHoliday">
                <div class="section-body-header">
                  <h4 class="col-12">{{ holiday.holiday_name }}</h4>
                </div>

                <div class="section-body-content row">
                  <div class="container">
                    <div class="content-item-with-icon col-12 row">
                      <div class="col-2 text-right">
                        <ion-icon item-left name="time"></ion-icon>
                      </div>
                      <div class="col-10 item-info-text">
                        <p ion-text>
                          {{ holiday.holiday_start_date | date: "mediumDate" }}
                        </p>
                      </div>
                    </div>

                    <div class="content-item-with-icon col-12 row">
                      <div>
                        <p ion-text>{{ holiday.holiday_description }}</p>
                      </div>
                    </div>
                  </div>
                </div>
              </ng-template>
              <ng-template #noHoliday> There is no holiday </ng-template>
            </ng-template>
            <ng-template #loadingHoliday>
              <ion-card>
                <ion-item no-lines>
                  <skeleton-item height="137px" width="100%"></skeleton-item>
                </ion-item>
              </ion-card>
            </ng-template>
          </div>
          <!-- END SECTION 3 BODY -->
        </div>
        <!-- END SECTION 3: UPCOMING HOLIDAY -->
        <!-- ********************************************* -->
        <!-- START SECTION 4: UPCOMING EXAM -->
        <div class="main-section section upcoming-exam-section">
          <!-- START SECTION 4 HEADER -->
          <div class="section-header">
            <div class="section-header-icon">
              <ion-icon item-left name="book"></ion-icon>
            </div>
            <div class="section-header-text"><h3>Upcoming Exam</h3></div>
          </div>
          <!-- END SECTION 4 HEADER -->

          <!-- START SECTION 4 BODY -->
          <div class="section-body">
            <ng-template
              let-exams
              [ngIf]="exam$ | async | nextExams"
              [ngIfElse]="loadingExams"
            >
              <ng-template
                [ngIf]="exams && exams.length > 0"
                [ngIfElse]="noExam"
              >
                <div *ngFor="let exam of exams">
                  <div class="section-body-header">
                    <h4 class="col-12">{{ exam.module }}</h4>
                  </div>

                  <div class="section-body-content row">
                    <div class="container">
                      <div class="content-item-with-icon col-12 row">
                        <div class="col-2 text-right">
                          <ion-icon item-left name="time"></ion-icon>
                        </div>
                        <div class="col-10 item-info-text">
                          <p ion-text>
                            {{ exam.since | date: "mediumDate" }} ({{
                              exam.since | date: "shortTime"
                            }}
                            - {{ exam.until | date: "shortTime" }})
                          </p>
                        </div>
                      </div>

                      <div class="content-item-with-icon col-12 row">
                        <div class="col-2 text-right">
                          <ion-icon item-left name="locate"></ion-icon>
                        </div>
                        <div class="col-10 item-info-text">
                          <p ion-text>APIIT @ TPM, Exam Hall</p>
                        </div>
                      </div>
                      <div class="content-item-without-icon col-12 row">
                        <div>
                          <p ion-text>
                            Dockets will be released on
                            <b>{{ exam.docketsDue | date }}</b
                            >, and the results will be published on
                            <b>{{ exam.resultDate | date }}.</b>
                          </p>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </ng-template>
              <ng-template #noExam> There is no exam </ng-template>
            </ng-template>
            <ng-template #loadingExams>
              <ion-card>
                <ion-item no-lines *ngFor="let i of numOfSkeletons">
                  <skeleton-item height="100px" width="100%"></skeleton-item>
                </ion-item>
              </ion-card>
            </ng-template>
          </div>
          <!-- END SECTION 4 BODY -->
        </div>
        <!-- END SECTION 4: UPCOMING EXAM -->
        <!-- ********************************************* -->
        <!-- START SECTION 5: CONSULTATION -->
        <!-- <div class="main-section section consultation-appointment-section"> -->
        <!-- START SECTION 5 HEADER -->
        <!-- <div class="section-header">
            <div class="section-header-icon">
              <ion-icon item-left name="briefcase"></ion-icon>
            </div>
            <div class="section-header-text">
              <h3>Consultation Appointment</h3>
            </div>
          </div> -->
        <!-- END SECTION 5 HEADER -->

        <!-- START SECTION 5 BODY -->
        <!-- <div class="section-body">
            <div class="section-body-header">
              <h4 class="col-12">HALIMATON BITI YOUSOF</h4>
            </div>

            <div class="section-body-content row">
              <div class="container">
                <div class="content-item-with-icon col-12 row">
                  <div class="col-2 text-right">
                    <ion-icon item-left name="time"></ion-icon>
                  </div>
                  <div class="col-10 item-info-text">
                    <p ion-text>12 Dec, 2018 | 12:30 PM</p>
                  </div>
                </div>

                <div class="content-item-with-icon col-12 row">
                  <div class="col-2 text-right">
                    <ion-icon item-left name="locate"></ion-icon>
                  </div>
                  <div class="col-10 item-info-text">
                    <p ion-text>NEW CAMPUS | D-07-14</p>
                  </div>
                </div>
                <div class="content-item-without-icon col-12 row">
                  <div>
                    <p ion-text>
                      To sign some papers related to my FYP and discuss about
                      XYZ which cannot be used in the project.
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div> -->
        <!-- END SECTION 5 BODY -->
        <!-- </div> -->
        <!-- END SECTION 5: CONSULTATION -->
        <!-- ********************************************* -->
        <!-- START SECTION 6: FYP MEETING -->
        <!-- <div class="main-section section fyp-meetings-section"> -->
        <!-- START SECTION 6 HEADER -->
        <!-- <div class="section-header">
            <div class="section-header-icon">
              <ion-icon item-left name="flask"></ion-icon>
            </div>
            <div class="section-header-text"><h3>FYP Meetings</h3></div>
          </div> -->
        <!-- END SECTION 6 HEADER -->

        <!-- START SECTION 6 BODY -->
        <!-- <div class="section-body">
            <div class="section-body-header">
              <h4 class="col-12">12 Dec, 2018 | 12:30 PM</h4>
            </div>

            <div class="section-body-content row">
              <div class="container">
                <div class="content-item-with-icon col-12 row">
                  <div class="col-2 text-right">
                    <ion-icon item-left name="person"></ion-icon>
                  </div>
                  <div class="col-10 item-info-text">
                    <p ion-text>HALIMATON BITI YOUSOF</p>
                  </div>
                </div>

                <div class="content-item-with-icon col-12 row">
                  <div class="col-2 text-right">
                    <ion-icon item-left name="locate"></ion-icon>
                  </div>
                  <div class="col-10 item-info-text">
                    <p ion-text>NEW CAMPUS | D-07-14</p>
                  </div>
                </div>
                <div class="content-item-without-icon col-12 row">
                  <div>
                    <p ion-text>
                      <strong>Purpose: </strong>Final Presentation.
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div> -->
        <!-- END SECTION 6 BODY -->
        <!-- </div> -->
        <!-- END SECTION 6: FYP MEETING -->
        <!-- ********************************************* -->
        <!-- START SECTION 7: BUS ROUTE -->
        <!-- <div class="main-section section preferred-bus-route-section"> -->
        <!-- START SECTION 7 HEADER -->
        <!-- <div class="section-header">
            <div class="section-header-icon">
              <ion-icon item-left name="bus"></ion-icon>
            </div>
            <div class="section-header-text"><h3>Preferred Bus Route</h3></div>
          </div> -->
        <!-- END SECTION 7 HEADER -->

        <!-- START SECTION 7 BODY -->
        <!-- <div class="section-body">
            <div class="section-body-header">
              <h4 class="col-12">APU - Endah Promenade</h4>
            </div>

            <div class="section-body-content row">
              <div class="container">
                <div class="content-item-with-icon col-12 row">
                  <div class="col-2 text-right">
                    <ion-icon item-left name="locate"></ion-icon>
                  </div>
                  <div class="col-10 item-info-text">
                    <p ion-text>
                      APU
                      <ion-icon name="arrow-forward"></ion-icon>
                      Endah Promenade
                    </p>
                  </div>
                </div>

                <div class="content-item-with-icon col-12 row">
                  <div class="col-2 text-right"></div>
                  <div class="col-10 item-info-text-not-bold">
                    <p ion-text>12:30 PM</p>
                  </div>
                </div>

                <div class="content-item-with-icon col-12 row">
                  <div class="col-2 text-right">
                    <ion-icon item-left name="locate"></ion-icon>
                  </div>
                  <div class="col-10 item-info-text">
                    <p ion-text>
                      Endah Promenade
                      <ion-icon name="arrow-forward"></ion-icon>
                      APU
                    </p>
                  </div>
                </div>

                <div class="content-item-with-icon col-12 row">
                  <div class="col-2 text-right"></div>
                  <div class="col-10 item-info-text-not-bold">
                    <p ion-text>13:30 PM</p>
                  </div>
                </div>
              </div>
            </div>
          </div> -->
        <!-- END SECTION 7 BODY -->
        <!-- </div> -->
        <!-- END SECTION 7: BUS ROUTE -->
        <!-- ********************************************* -->
        <!-- START SECTION 8: UPCOMING EVENT -->
        <!-- <div class="main-section section upcoming-event-section"> -->
        <!-- START SECTION 8 HEADER -->
        <!-- <div class="section-header">
            <div class="section-header-icon">
              <ion-icon item-left name="bonfire"></ion-icon>
            </div>
            <div class="section-header-text"><h3>Upcoming Event</h3></div>
          </div> -->
        <!-- END SECTION 3 HEADER -->

        <!-- START SECTION 3 BODY -->
        <!-- <div class="section-body">
            <div class="section-body-header">
              <h4 class="col-12">Football Competation Event</h4>
            </div>

            <div class="section-body-content row">
              <div class="container">
                <div class="content-item-with-icon col-12 row">
                  <div class="col-2 text-right">
                    <ion-icon item-left name="time"></ion-icon>
                  </div>
                  <div class="col-10 item-info-text">
                    <p ion-text>24 Dec, 2018 | 07:30 PM</p>
                  </div>
                </div>

                <div class="content-item-with-icon col-12 row">
                  <div class="col-2 text-right">
                    <ion-icon item-left name="locate"></ion-icon>
                  </div>
                  <div class="col-10 item-info-text">
                    <p ion-text>TPM, APU New Campus</p>
                  </div>
                </div>

                <div class="content-item-with-icon col-12 row">
                  <div>
                    <p ion-text>
                      This event organized by APU Football Club members and it
                      aims to imrpove the ...
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div> -->
        <!-- END SECTION 8 BODY -->
        <!-- </div> -->
        <!-- END SECTION 8: UPCOMING EVENTS -->
        <!-- ********************************************* -->
        <!-- START SECTION 9: FINANCE -->
        <div class="main-section section financials-section">
          <!-- START SECTION 9 HEADER -->
          <div class="section-header">
            <div class="section-header-icon">
              <ion-icon item-left name="logo-usd"></ion-icon>
            </div>
            <div class="section-header-text"><h3>Financials</h3></div>
          </div>
          <!-- END SECTION 9 HEADER -->

          <!-- START SECTION 9 BODY -->
          <div class="section-body">
            <ng-template let-outstanding [ngIf]="overdue$ | async">
              <div class="section-body-content row">
                <div class="container">
                  <div class="content-item-with-icon col-12 row">
                    <div class="progress">
                      <div
                        class="progress-bar progress-bar-striped bg-success progress-bar-animated"
                        role="progressbar"
                        [style.width]="
                          outstanding[0].TOTAL_PAID /
                            outstanding[0].TOTAL_PAYABLE | percent: '1.0-5'
                        "
                        [attr.aria-valuenow]="outstanding[0].TOTAL_PAID"
                        aria-valuemin="0"
                        [attr.aria-valuemax]="outstanding[0].TOTAL_PAYABLE"
                      >
                        <strong>
                          {{
                            outstanding[0].TOTAL_PAID /
                              outstanding[0].TOTAL_PAYABLE | percent: "1.0-1"
                          }}
                        </strong>
                      </div>
                      <div
                        class="prprogress-bar progress-bar-striped bg-danger progress-bar-animated"
                        role="progressbar"
                        [style.width]="
                          outstanding[0].TOTAL_OUTSTANDING /
                            outstanding[0].TOTAL_PAYABLE | percent: '1.0-5'
                        "
                        [attr.aria-valuenow]="outstanding[0].TOTAL_OUTSTANDING"
                        aria-valuemin="0"
                        [attr.aria-valuemax]="outstanding[0].TOTAL_PAYABLE"
                      ></div>
                    </div>
                  </div>
                  <div class="col-12 row content-item-with-icon">
                    <div class="bar-left-info col-6 text-left no-padding">
                      {{ outstanding[0].TOTAL_PAID | currency: "MYR":"RM" }}
                    </div>
                    <div class="bar-right-info col-6 text-right no-padding">
                      {{
                        outstanding[0].TOTAL_OUTSTANDING | currency: "MYR":"RM"
                      }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="section-body-header">
                <h4 class="col-12">
                  Total Payable:
                  <span>{{
                    outstanding[0].TOTAL_PAYABLE | currency: "MYR":"RM"
                  }}</span>
                </h4>
              </div>

              <div class="section-body-header">
                <h4 class="col-12">
                  Total Paid:
                  <span>{{
                    outstanding[0].TOTAL_PAID | currency: "MYR":"RM"
                  }}</span>
                </h4>
              </div>

              <div class="section-body-header">
                <h4 class="col-12">
                  Total Outstanding:
                  <span>{{
                    outstanding[0].TOTAL_OUTSTANDING | currency: "MYR":"RM"
                  }}</span>
                </h4>
              </div>

              <div class="section-body-header">
                <h4 class="col-12">
                  Total Overdue:
                  <span>{{
                    outstanding[0].TOTAL_OVERDUE | currency: "MYR":"RM"
                  }}</span>
                </h4>
              </div>

              <div class="section-body-header">
                <h4 class="col-12">
                  Fine:
                  <span>{{ outstanding[0].FINE | currency: "MYR":"RM" }}</span>
                </h4>
              </div>
            </ng-template>
          </div>
          <!-- END SECTION 9 BODY -->
        </div>
        <!-- END SECTION 9: FINANCE -->
        <!-- ********************************************* -->
        <!-- START SECTION 10: ATTENDANCE -->
        <div class="main-section section low-attendance-section">
          <!-- START SECTION 10 HEADER -->
          <div class="section-header">
            <div class="section-header-icon">
              <ion-icon item-left name="alarm"></ion-icon>
            </div>
            <div class="section-header-text"><h3>Low Attendance</h3></div>
          </div>
          <!-- END SECTION 10 HEADER -->

          <!-- START SECTION 10 BODY -->

          <div class="section-body">
            <ng-template let-attendance [ngIf]="attendance$ | async">
              <div class="row low-attendance-div">
                <div
                  class=" col-12 low-attendance-details"
                  *ngFor="let attendance of attendance"
                >
                  <div class="section-body-header">
                    <h4
                      class="col-12"
                      style="padding-bottom: 5px !important;margin-bottom: 0 !important"
                    >
                      {{ attendance.MODULE_ATTENDANCE }}
                      <!-- <p>{{attendance | json}}</p> -->
                    </h4>
                  </div>
                  <div class="attendance-chart col-12">
                    <div class="progress" style="height: 20px;">
                      <div
                        class="progress-bar progress-bar-striped bg-success progress-bar-animated"
                        role="progressbar"
                        [style.width]="attendance.PERCENTAGE + '%'"
                        aria-valuenow="attendance.PERCENTAGE"
                        aria-valuemin="0"
                        aria-valuemax="100"
                      >
                        <strong>{{ attendance.PERCENTAGE + "%" }}</strong>
                      </div>
                      <div
                        class="progress-bar progress-bar-striped bg-danger progress-bar-animated"
                        role="progressbar"
                        [style.width]="100 - attendance.PERCENTAGE + '%'"
                        aria-valuenow="100 - attendance.PERCENTAGE"
                        aria-valuemin="0"
                        aria-valuemax="100"
                      ></div>
                    </div>
                  </div>
                </div>
              </div>
            </ng-template>
          </div>
          <!-- END SECTION 10 BODY -->
        </div>
        <!-- END SECTION 10: ATTENDANCE -->
        <!-- ********************************************* -->
        <!-- START SECTION 11: APCARD -->
        <div
          class="main-section section low-attendance-section"
          *ngIf="(apcardTransaction$ | async)"
        >
          <!-- START SECTION 11 HEADER -->
          <div class="section-header">
            <div class="section-header-icon">
              <ion-icon item-left name="card"></ion-icon>
            </div>
            <div class="section-header-text"><h3>APCard Transactions</h3></div>
          </div>
          <!-- END SECTION 11 HEADER -->

          <!-- START SECTION 11 BODY -->
          <div class="section-body">
            <div class="apcard-chart">
              <chart
                *ngIf="apcardChartData"
                [type]="type[1]"
                [data]="apcardChartData"
                [options]="options"
              ></chart>
            </div>
          </div>
          <!-- END SECTION 11 BODY -->
        </div>
        <!-- END SECTION 11: APCARD -->
        <!-- ********************************************* -->
        <!-- ********************************************* -->
        <!-- START SECTION 12: GPA -->
        <div class="main-section section low-attendance-section">
          <!-- START SECTION 12 HEADER -->
          <div class="section-header">
            <div class="section-header-icon">
              <ion-icon item-left name="medal"></ion-icon>
            </div>
            <div class="section-header-text"><h3>GPA Per Intake</h3></div>
          </div>
          <!-- END SECTION 12 HEADER -->
          <!-- START SECTION 12 BODY -->
          <div class="section-body">
            <ng-template [ngIf]="!block" [ngIfElse]="blocked">
              <ng-template [ngIf]="barChartData" [ngIfElse]="loadingGPA">
                <div class="apcard-chart">
                  <chart
                  [type]="type[0]"
                  [data]="barChartData"
                  [options]="options[1]"
                  ></chart>
                </div>
              </ng-template>
              <ng-template #loadingGPA>
                <ion-card>
                  <ion-item no-lines>
                    <skeleton-item height="160px" width="100%"></skeleton-item>
                  </ion-item>
                </ion-card>
              </ng-template>
              <ng-template #blocked> </ng-template>
            </ng-template>
          </div>
          <!-- END SECTION 12 BODY -->
        </div>
        <!-- END SECTION 12: GPA -->
        <!-- ********************************************* -->
      </div>
      <!-- END SECTIONS 2->12 CONTAINER -->
    </div>
    <!-- END PAGE BODY -->
  </div>
  <!-- END ALL THE PAGE CONTENT -->
</ion-content>
